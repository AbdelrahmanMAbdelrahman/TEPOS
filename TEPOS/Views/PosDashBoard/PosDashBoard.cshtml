@using ERP.Controllers.POS
@using ERP.Controllers.Manager
@using ERP.CSharpLib
@using ERP.Models
@{
    ViewBag.Title = "PosDashBoard";
    var todaysData = ViewBag.todaysData;
    ConnectionDatabase database = new ConnectionDatabase();
    ErpManager erpManager = new ErpManager();
    int cmnId = erpManager.CmnId;
    int usrId = erpManager.UserId;
}

<script src="~/Scripts/Custom/Pos/Dashboard/PosDashboard.js"></script>



<div class="panel-header bg-primary-gradient">

    <div class="page-inner py-5">
        <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
            <div>
                <h2 class="text-white pb-2 fw-bold">TREND-POS Dashboard</h2>
            </div>

            <div class="ml-md-auto py-2 py-md-0">
                <a href="/PosSetting/Shift" class="btn btn-white btn-border btn-round mr-2">@HttpContext.GetGlobalResourceObject("Local", "Shift")</a>
                <a href="/PosSetting/Customer" class="btn btn-white btn-border btn-round mr-2">
                    @HttpContext.GetGlobalResourceObject("Local",
               "Add Customer")
            </a>
            <a href="/Pos/Billing" class="btn btn-secondary btn-round">@HttpContext.GetGlobalResourceObject("Local", "Create New Bill")</a>
        </div>

        <div align="center">
            <b class="text-white pb-2 fw-bold"> @HttpContext.GetGlobalResourceObject("Local", "Shift Code")</b><br />
            <span id="txtShiftCode" class="text-white pb-2 fw-bold"> @database.PosShiftDbSet.Where(w => w.UserId == usrId && w.EndTime == null).Select(s => s.Id).FirstOrDefault()</span>
        </div>
    </div>

</div>

</div>

<div class="page-inner mt--5">
    <div class="row mt--2">
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Total Bill")</div>
                    <div class="d-flex flex-wrap justify-content-around pb-2">
                        <div class="px-2 pb-2 pb-md-0 text-center">
                            <h2 class="fw-bold mt-3 mb-0">@todaysData.TotalInvoice</h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Total Sales")  </div>
                    <div class="d-flex flex-wrap justify-content-around pb-2">
                        <div class="px-2 pb-2 pb-md-0 text-center">
                            <h2 class="fw-bold mt-3 mb-0">@Math.Round(todaysData.Sales, MidpointRounding.AwayFromZero)</h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>


        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Total Due")</div>
                    <div class="d-flex flex-wrap justify-content-around pb-2">
                        <div class="px-2 pb-2 pb-md-0 text-center">
                            <h2 class="fw-bold mt-3 mb-0">@Math.Round(todaysData.Due, MidpointRounding.AwayFromZero)</h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Due Collection")</div>
                    <div class="d-flex flex-wrap justify-content-around pb-2">
                        <div class="px-2 pb-2 pb-md-0 text-center">
                            <h2 class="fw-bold mt-3 mb-0">@Math.Round(todaysData.DueCollection, MidpointRounding.AwayFromZero)</h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-md-7">
            <div class="card">
                <div class="card-header">
                    <div class="card-head-row">
                        <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Sales & Due(Last30Days)")</div>
                        <div class="card-tools">

                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container" style="min-height: 326px">
                        <div id="Last30DaysSales"></div>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-md-5">
            <div class="card">
                <div class="card-header">
                    <div class="card-head-row">
                        <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Branch Wise Sales(Lasttwomonth)")</div>
                        <div class="card-tools">

                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container" style="min-height: 326px">
                        <div id="LastTwoMonthSalesBranchWise"></div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <div class="card-head-row">
                        <div class="card-title">@HttpContext.GetGlobalResourceObject("Local", "Branch wise sales(Last30days)")</div>
                        <div class="card-tools">

                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-container" style="min-height: 326px">
                        <div id="BranchWiseLast30DaysSales"></div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    H
</div>

<script src="~/Scripts/lib/morris.js-0.5.1/raphael-min.js"></script>
<script src="~/Scripts/lib/morris.js-0.5.1/morris.js"></script>
<link href="~/Scripts/lib/morris.js-0.5.1/morris.css" rel="stylesheet" />
<link href="~/Scripts/lib/morris.js-0.5.1/prettify.min.css" rel="stylesheet" />
<script src="~/Scripts/lib/morris.js-0.5.1/prettify.min.js"></script>